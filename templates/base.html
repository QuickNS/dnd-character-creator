<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}D&D 2024 Character Creator{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2IDJMMjAgMTJIMzBMMjIuNSAyMEwyNiAzMEwxNiAyNkw2IDMwTDkuNSAyMEwyIDEySDE2VjJaIiBmaWxsPSIjRDRBRjM3Ii8+CjxwYXRoIGQ9Ik0xNiA2TDE4IDEySDI0TDE5LjUgMTZMMjEgMjJMMTYgMjBMMTEgMjJMMTIuNSAxNkw4IDEySDE2VjZaIiBmaWxsPSIjMUUzQThBIi8+Cjwvc3ZnPgo=">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                <i class="fas fa-dice-d20 me-2"></i> D&D 2024 Character Creator
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="{{ url_for('reset') }}">
                    <i class="fas fa-redo-alt me-1"></i> Start Over
                </a>
            </div>
        </div>
    </nav>

    <main class="container mt-4">
        {% block content %}{% endblock %}
    </main>

    <!-- <footer class="text-dark py-4 mt-5">
        <div class="container text-center">
            <div class="mb-2">
                <i class="fas fa-scroll me-2 text-gold"></i>
                <span class="text-gold">Forged in the Realms of Adventure</span>
            </div>
            <small>&copy; 2024 D&D Character Creator - Built with Flask & Magic</small>
        </div>
    </footer> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    
    <script>
    // Dynamic background switching based on class selection
    function updateClassBackground(className) {
        const classImages = {
            'barbarian': '/static/background/barbarian.png',
            'bard': '/static/background/bard.png', 
            'cleric': '/static/background/cleric.png',
            'druid': '/static/background/druid.png',
            'fighter': '/static/background/fighter.png',
            'monk': '/static/background/monk.png',
            'paladin': '/static/background/paladin.png',
            'ranger': '/static/background/ranger.png',
            'rogue': '/static/background/rogue.png',
            'sorcerer': '/static/background/sorcerer.png',
            'warlock': '/static/background/warlock.png',
            'wizard': '/static/background/wizard.png'
            // Add more class images as they become available
        };
        
        const imagePath = classImages[className.toLowerCase()] || '/static/background/bar-l.png';
        document.documentElement.style.setProperty('--left-bg-image', `url('${imagePath}')`);
        
        // Store selection for persistence across pages
        sessionStorage.setItem('selectedClass', className);
    }
    
    // Auto-detect class from session/page context if available
    document.addEventListener('DOMContentLoaded', function() {
        // Try to get class from various sources
        const storedClass = sessionStorage.getItem('selectedClass');
        const pageClass = document.querySelector('[data-class]')?.getAttribute('data-class');
        const characterClass = window.character?.class;
        
        const className = characterClass || pageClass || storedClass;
        
        if (className) {
            updateClassBackground(className);
        }
    });
    
    // Expose function globally for use in other pages
    window.updateClassBackground = updateClassBackground;
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>